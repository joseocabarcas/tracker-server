!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tracker-view",[],t):"object"==typeof exports?exports["tracker-view"]=t():e["tracker-view"]=t()}(global,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("events")},function(e,t,n){e.exports=n(3).default},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";n.r(t);const i=n(0);class o extends i{constructor(e,t,n){super(),this.connection=t,this.server=n,this.uid=!1,this.ip=t.ip,this.port=t.port,this.name=!1,this.loged=!1,this.adapter=new e(this),this.on("data",e=>{this.adapter.parseData(e)})}send(e){this.emit("send_data",e),this.connection.write(e)}}class s{constructor(e){this.device=e}parseData(e){if(e=e.toString(),console.log(e),e.includes("##")&&this.sendLoad(),15==e.length&&this.sendOn(),e.length>26){const t=["imei","status","time","empty","a2","b1","b2","c1","c2","d1","d2","speed"],n=e.split(","),i=t.map((e,t)=>[e,n[t]]);console.log(new Map(i));const o=new Map(i);this.sendCommand(o.get("imei"))}return e}sendLoad(){this.device.send("LOAD")}sendOn(){this.device.send("ON")}sendCommand(e){this.device.send("**,imei:359586018966098,B")}formatData(e){}}n.d(t,"default",function(){return d});const r=n(0),c=n(2);class d extends r{constructor(e,t){super(),this.defaults={debug:!1,port:8001},this.opts=Object.assign(this.defaults,e),this.devices=[],this.server=!1,this.cb=t,this.init(()=>{this.server=c.createServer(e=>{e.device=new o(s,e,this),this.devices.push(e),e.on("data",function(t){e.device.emit("data",t)}),e.on("end",()=>{this.devices.splice(this.devices.indexOf(e),1),e.device.emit("disconnected")}),e.on("error",e=>{console.log(e)}),this.cb(e.device,e),e.device.emit("connected")}).listen(this.opts.port)})}init(e){this.emit("before_init"),"function"==typeof e&&e(),this.emit("init"),console.log("\n=================================================\nGPS LISTENER running at port "+this.opts.port)}}}])});
//# sourceMappingURL=tracker-view.min.js.map